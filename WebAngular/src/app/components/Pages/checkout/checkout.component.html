<app-topmenu [(cart)]="cart"></app-topmenu>
<div class="container">
    <div class="py-5 text-center">
        <h2>Checkout</h2>
    </div>

    <div class="row">
        <div class="col-md-4 order-md-2 mb-4">
            <h4 class="d-flex justify-content-between align-items-center mb-3">
                <span class="text-muted">Your cart</span>
                <span class="badge badge-secondary badge-pill">{{items()}}</span>
            </h4>
            <ul class="list-group mb-3">
                <li *ngFor="let item of cart" class="list-group-item d-flex justify-content-between lh-condensed">
                    <div>
                        <h6 class="my-0">{{item.product_name}}</h6>
                        <small class="text-muted">Quantity: {{item.quantity}}</small>
                    </div>
                    <span class="text-muted">${{item.quantity * item.discount}}</span>
                </li>
                <li class="list-group-item d-flex justify-content-between">
                    <span>Total (USD)</span>
                    <strong>${{caltotal()}}</strong>
                </li>
            </ul>
        </div>
        <div class="col-md-8 order-md-1">

            <div class="needs-validation" novalidate="">
                <div class="row">
                    <div class="col-md-6 mb-3">
                        <label for="firstName">First name</label>
                        <input [(ngModel)]="user.FirstName" type="text" class="form-control" id="firstName"
                            [ngClass]="{ 'is-invalid': validation.FirstName }" required>
                        <div class="invalid-feedback" *ngIf="validation.FirstName">
                            Valid first name is required.
                        </div>
                    </div>
                    <div class="col-md-6 mb-3">
                        <label for="lastName">Last name</label>
                        <input [(ngModel)]="user.LastName" type="text" class="form-control" id="lastName"
                            [ngClass]="{ 'is-invalid': validation.LastName }" required>
                        <div class="invalid-feedback" *ngIf="validation.LastName">
                            Valid last name is required.
                        </div>
                    </div>
                </div>

                <div class="mb-3">
                    <label for="username">Username <span class="text-muted">(Optional)</span></label>
                    <div class="input-group">

                        <input [(ngModel)]="user.UserName" type="text" class="form-control" id="username"
                            placeholder="Username">
                    </div>
                </div>

                <!-- <div class="mb-3">
                    <label for="email">Email <span class="text-muted">(Optional)</span></label>
                    <input [(ngModel)]="user.Email" type="email" class="form-control" id="email"
                        placeholder="you@example.com">
                    <div class="invalid-feedback">
                        Please enter a valid email address for shipping updates.
                    </div>
                </div> -->

                <div class="mb-3">
                    <label for="contact">Mobile Number</label>
                    <input [(ngModel)]="userdetail.contact_number" type="text" class="form-control" id="contact"
                        placeholder="+xx xxx xxxxxxx"
                        [ngClass]="{ 'is-invalid': validation.contact_number }" required>
                    <div class="invalid-feedback" *ngIf="validation.contact_number">
                        Please enter a valid contact number for shipping updates.
                    </div>
                </div>
                <div>
                    <h4 class="mb-3">Billing address</h4>
                    <hr class="mb-4">
                    <div class="custom-control custom-checkbox">
                        <input [(ngModel)]="isshippingdifferernt" (change)="showshipping($event)" type="checkbox"
                            class="custom-control-input" id="same-address">
                        <label class="custom-control-label" for="same-address">Shipping address is the same as my
                            billing
                            address</label>
                    </div>

                    <div class="custom-control custom-checkbox">
                        <input [(ngModel)]="saveinfo" type="checkbox" class="custom-control-input" id="same-saveinfo">
                        <label class="custom-control-label" for="same-saveinfo">Save the provide information </label>
                    </div>


                    <hr class="mb-4">
                </div>

                <div class="mb-3">
                    <label for="address">Address</label>
                    <input [(ngModel)]="userdetail.billing_street_address" type="text" class="form-control" id="address"
                        placeholder="1234 Main St"
                        [ngClass]="{ 'is-invalid': validation.billing_street_address }" required>
                    <div class="invalid-feedback" *ngIf="validation.billing_street_address">
                        Please enter your billing address.
                    </div>
                </div>

                <div class="mb-3">
                    <label for="address2">Billing City</label>
                    <input [(ngModel)]="userdetail.billing_city_address" type="text" class="form-control" id="address2"
                        placeholder="City"
                        [ngClass]="{ 'is-invalid': validation.billing_city_address }" required>
                    <div class="invalid-feedback" *ngIf="validation.billing_city_address">
                        Please enter your billing city.
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-5 mb-3">
                        <label for="country">Country</label>
                        <input [(ngModel)]="userdetail.billing_country_address" type="text" class="form-control"
                            id="country" placeholder="Country"
                            [ngClass]="{ 'is-invalid': validation.billing_country_address }" required>
                            <div class="invalid-feedback" *ngIf="validation.billing_country_address">
                            Please select a valid country.
                        </div>
                    </div>
                    <div class="col-md-4 mb-3">
                        <label for="state">State</label>
                        <input [(ngModel)]="userdetail.billing_state_address" type="text" class="form-control"
                            id="state" placeholder="State"
                            [ngClass]="{ 'is-invalid': validation.billing_state_address }" required>
                        <div class="invalid-feedback" *ngIf="validation.billing_state_address">
                            Please provide a valid state.
                        </div>
                    </div>
                    <div class="col-md-3 mb-3">
                        <label for="zip">Zip</label>
                        <input [(ngModel)]="userdetail.billing_zip" type="text" class="form-control" id="zip"
                            [ngClass]="{ 'is-invalid': validation.billing_zip }" required>
                        <div class="invalid-feedback" *ngIf="validation.billing_zip">
                            Zip code required.
                        </div>
                    </div>
                </div>
                <div *ngIf="!isshippingdifferernt">
                    <h4 class="mb-3">Shipping address</h4>
                    <div class="mb-3">
                        <label for="address">Address</label>
                        <input [(ngModel)]="userdetail.shipping_street_address" type="text" class="form-control"
                            id="address" placeholder="1234 Main St"
                            [ngClass]="{ 'is-invalid': validation.shipping_street_address }" required>
                        <div class="invalid-feedback" *ngIf="validation.shipping_street_address">
                            Please enter your shipping address.
                        </div>
                    </div>

                    <div class="mb-3">
                        <label for="address2">Shipping City</label>
                        <input [(ngModel)]="userdetail.shipping_city_address" type="text" class="form-control"
                            id="address2" placeholder="City"
                            [ngClass]="{ 'is-invalid': validation.shipping_city_address }" required>
                        <div class="invalid-feedback" *ngIf="validation.shipping_city_address">
                            Please enter your shipping city.
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-5 mb-3">
                            <label for="country">Country</label>
                            <input [(ngModel)]="userdetail.shipping_country_address" type="text" class="form-control"
                                id="country" placeholder="Country"
                                [ngClass]="{ 'is-invalid': validation.shipping_country_address }" required>
                            <div class="invalid-feedback" *ngIf="validation.shipping_country_address">
                                Please select a valid country.
                            </div>
                        </div>
                        <div class="col-md-4 mb-3">
                            <label for="state">State</label>
                            <input [(ngModel)]="userdetail.shipping_state_address" type="text" class="form-control"
                                id="state" placeholder="State"
                                [ngClass]="{ 'is-invalid': validation.shipping_state_address }" required>
                            <div class="invalid-feedback" *ngIf="validation.shipping_state_address">
                                Please provide a valid state.
                            </div>
                        </div>
                        <div class="col-md-3 mb-3">
                            <label for="zip">Zip</label>
                            <input [(ngModel)]="userdetail.shipping_zip" type="text" class="form-control" id="zip"
                                [ngClass]="{ 'is-invalid': validation.shipping_zip }" required>
                            <div class="invalid-feedback" *ngIf="validation.shipping_zip">
                                Zip code required.
                            </div>
                        </div>
                    </div>
                </div>


                <hr class="mb-4">

                <h4 class="mb-3">Payment</h4>
             
                <hr class="mb-4">
                <div class="col-md-12 text-center btn_div ">
                    <button (click)="pay()" type="submit"
                        class=" btn btn-block mybtn btn-primary tx-tfm">Confrim Order</button>
                </div>
                <p class="mt-3">
                    Try it out using the test card number <b>4242 4242 4242 4242</b>, a random three-digit CVC number, any expiration date in the future, and a random five-digit U.S. ZIP code.
                </p>
            </div>

            
        </div>
    </div>

</div>
<app-footer></app-footer>